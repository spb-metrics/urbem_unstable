<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="comments">Copyright (c) 2006 &lt;&lt;Your Company Name here>></property>
    <property name="createdBy">Eclipse BIRT Designer Version 4.4.0.v201405191524 Build &lt;4.4.0.v20140606-1451></property>
    <property name="units">in</property>
    <text-property name="displayName">Template Urbem Retrato Entidade</text-property>
    <property name="layoutPreference">auto layout</property>
    <list-property name="libraries">
        <structure>
            <property name="fileName">../../../../../../gestaoAdministrativa/fontes/RPT/framework/library/urbem.rptlibrary</property>
            <property name="namespace">urbem</property>
        </structure>
    </list-property>
    <parameters>
        <scalar-parameter name="term_user" id="6666">
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="exercicio" id="563">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <simple-property-list name="defaultValue">
                <value type="constant">2007</value>
            </simple-property-list>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="cod_acao" id="564">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="db_conn_url" id="566">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant">jdbc:postgresql://172.16.30.4:5432/gp_mariana_virada_organograma</value>
            </simple-property-list>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="entidade" id="569">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmCodClassificacao" id="1356">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmCodAssunto" id="1357">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmResumo" id="1358">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmCodOrgao" id="1359">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmNumCgm" id="1365">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmDtIni" id="1450">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmDtFim" id="1451">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmExeFinal" id="1452">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmExeInicial" id="1453">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmProcessoInicial" id="1454">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmProcessoFinal" id="1455">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmProcessoIni" id="1456">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmProcessoFim" id="1457">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmExercicioFinal" id="1458">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmExercicioInicial" id="1459">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmDataIni" id="1460">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmDataFim" id="1461">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmProcesso" id="1462">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmAnoExercicio" id="1463">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmDtInicial" id="1464">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="prmDtFinal" id="1465">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="teste" id="1467">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="centroCusto" id="6672">
            <property name="valueType">static</property>
            <property name="isRequired">false</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant"></value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Data Source" id="562"
 extends="urbem.postgres"/>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="dsEtiquetas" id="570">
            <list-property name="columnHints"/>
            <list-property name="parameters"/>
            <structure name="cachedMetaData"/>
            <method name="beforeOpen"><![CDATA[if ((params["prmProcesso"] != "") &amp;&amp; (params["prmAnoExercicio"] != "")){
	this.queryText = this.queryText + " AND sw_processo.cod_processo = " +params["prmProcesso"];
	this.queryText = this.queryText + " AND sw_processo.ano_exercicio = '" +params["prmAnoExercicio"]+"'";
}
if ((params["prmProcessoInicial"] != "") &amp;&amp; (params["prmProcessoFinal"] == "")){
	this.queryText = this.queryText + " AND sw_processo.cod_processo = " +params["prmProcessoInicial"];
}

if ((params["prmProcessoFinal"] != "") &amp;&amp; (params["prmProcessoInicial"] == "")){
	this.queryText = this.queryText + " AND sw_processo.cod_processo = " +params["prmProcessoFinal"];
}

if ((params["prmProcessoIni"] != "") &amp;&amp; (params["prmProcessoFim"] != "")){
	this.queryText = this.queryText + " AND sw_processo.cod_processo BETWEEN " +params["prmProcessoIni"]+ " AND " +params["prmProcessoFim"];
}

if ((params["prmExeInicial"] != "") &amp;&amp; (params["prmExeFinal"] == "")){
	this.queryText = this.queryText + " AND sw_processo.ano_exercicio = '" +params["prmExeInicial"]+"'";
}

if ((params["prmExeFinal"] != "") &amp;&amp; (params["prmExeInicial"] == "")){
	this.queryText = this.queryText + " AND sw_processo.ano_exercicio = '" +params["prmExeFinal"]+"'";
}

if ((params["prmExercicioInicial"] != "") &amp;&amp; (params["prmExercicioFinal"] != "")){
	this.queryText = this.queryText + " AND sw_processo.ano_exercicio::INTEGER BETWEEN " +params["prmExercicioInicial"]+ " AND " +params["prmExercicioFinal"];
}

if (params["prmCodClassificacao"] != ""){
	this.queryText = this.queryText + " AND sw_processo.cod_classificacao = " +params["prmCodClassificacao"];
}

if (params["prmCodAssunto"] != ""){
	this.queryText = this.queryText + " AND sw_processo.cod_assunto = " +params["prmCodAssunto"];
}

if (params["prmResumo"] != ""){
	this.queryText = this.queryText + " AND sw_processo.resumo_assunto = " +params["prmResumo"];
}

if (params["prmCodOrgao"] != ""){
	this.queryText = this.queryText + " AND sw_ultimo_andamento.cod_orgao = " +params["prmCodOrgao"];
}

if (params["prmNumCgm"] != ""){
	this.queryText = this.queryText + " AND sw_processo_interessado.numcgm = " +params["prmNumCgm"];
}

if ((params["prmDtIni"] != "") &amp;&amp; (params["prmDtFim"] != "")){
	this.queryText = this.queryText + " AND sw_processo.timestamp between '"+params["prmDtIni"]+"' AND '"+params["prmDtFim"]+"'";
}

if ((params["prmDtInicial"] != "") &amp;&amp; (params["prmDtFinal"] != "")){
	this.queryText = this.queryText + " AND sw_processo.timestamp between '"+params["prmDtInicial"]+"' AND '"+params["prmDtFinal"]+"'";
}

if ((params["prmDataIni"] != "") &amp;&amp; (params["prmDataFim"]) != ""){
	this.queryText = this.queryText + " AND sw_processo.timestamp between '"+params["prmDataIni"]+"' AND '"+params["prmDataFim"]+"'";
}
this.queryText = this.queryText + " ORDER BY sw_processo.cod_processo, sw_processo.ano_exercicio DESC";

//params['teste'] = this.queryText;]]></method>
            <property name="dataSource">Data Source</property>
            <list-property name="resultSet"/>
            <xml-property name="queryText"><![CDATA[SELECT  sw_processo.cod_processo || '/' || sw_processo.ano_exercicio as cod_ano_processo
     ,  initcap(LOWER(sw_cgm.nom_cgm)) as nom_cgm
     ,  sw_classificacao.nom_classificacao
     ,  sw_assunto.nom_assunto
     ,  recuperaDescricaoOrgao(sw_ultimo_andamento.cod_orgao, sw_ultimo_andamento.timestamp::date) as nom_setor
     ,  centro_custo.cod_centro
     ,  centro_custo.descricao AS descricao_centro

  FROM  sw_processo
  		LEFT JOIN almoxarifado.centro_custo
  		       ON centro_custo.cod_centro=sw_processo.cod_centro
     ,  sw_cgm
     ,  sw_classificacao
     ,  sw_assunto
     ,  sw_situacao_processo
     ,  sw_ultimo_andamento
     ,  organograma.orgao
     ,  sw_processo_interessado

 WHERE  sw_processo_interessado.numcgm        = sw_cgm.numcgm
   AND  sw_classificacao.cod_classificacao    = sw_processo.cod_classificacao
   AND  sw_assunto.cod_classificacao 	      = sw_processo.cod_classificacao
   AND  sw_assunto.cod_assunto 			      = sw_processo.cod_assunto
   AND  sw_processo.cod_classificacao 	      = sw_assunto.cod_classificacao
   AND  sw_processo.cod_situacao      	      = sw_situacao_processo.cod_situacao
   AND  sw_processo.cod_processo      	      = sw_ultimo_andamento.cod_processo
   AND  sw_processo.ano_exercicio     	      = sw_ultimo_andamento.ano_exercicio
   AND  sw_assunto.cod_classificacao  	      = sw_classificacao.cod_classificacao
   AND  sw_ultimo_andamento.cod_orgao         = orgao.cod_orgao
   AND  sw_processo_interessado.cod_processo  = sw_processo.cod_processo
   AND  sw_processo_interessado.ano_exercicio = sw_processo.ano_exercicio]]></xml-property>
        </oda-data-set>
    </data-sets>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="type">a4</property>
            <property name="orientation">portrait</property>
            <property name="topMargin">10.46mm</property>
            <property name="leftMargin">7mm</property>
            <property name="bottomMargin">0mm</property>
            <property name="rightMargin">0.1in</property>
        </simple-master-page>
    </page-setup>
    <body>
        <table id="589">
            <property name="fontSize">10pt</property>
            <property name="marginTop">0mm</property>
            <property name="marginLeft">0mm</property>
            <property name="marginBottom">0mm</property>
            <property name="marginRight">0mm</property>
            <property name="textAlign">left</property>
            <property name="verticalAlign">top</property>
            <property name="pageBreakAfter">always</property>
            <property name="height">30mm</property>
            <property name="width">96mm</property>
            <property name="dataSet">dsEtiquetas</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">cod_ano_processo</property>
                    <expression name="expression">dataSetRow["cod_ano_processo"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">nom_cgm</property>
                    <expression name="expression">dataSetRow["nom_cgm"];</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">nom_classificacao</property>
                    <expression name="expression">dataSetRow["nom_classificacao"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">nom_assunto</property>
                    <expression name="expression">dataSetRow["nom_assunto"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">nom_setor</property>
                    <expression name="expression">dataSetRow["nom_setor"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">centro_custo</property>
                    <expression name="expression" type="javascript">if(dataSetRow["cod_centro"] !=null&amp;&amp;dataSetRow["descricao_centro"]!=null){
	dataSetRow["cod_centro"] + ' - ' +dataSetRow["descricao_centro"]
}else{
	''
}</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
            </list-property>
            <property name="repeatHeader">false</property>
            <property name="pageBreakInterval">1</property>
            <column id="611">
                <property name="fontWeight">normal</property>
                <property name="width">28mm</property>
            </column>
            <column id="612">
                <property name="width">68mm</property>
            </column>
            <detail>
                <row id="593">
                    <property name="height">2mm</property>
                    <cell id="594">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <text id="614">
                            <property name="fontWeight">bold</property>
                            <property name="textAlign">left</property>
                            <property name="contentType">auto</property>
                            <text-property name="content"><![CDATA[Processo:]]></text-property>
                        </text>
                    </cell>
                    <cell id="595">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <data id="648">
                            <property name="fontWeight">bold</property>
                            <property name="textAlign">right</property>
                            <property name="resultSetColumn">cod_ano_processo</property>
                        </data>
                    </cell>
                </row>
                <row id="596">
                    <property name="height">2mm</property>
                    <cell id="597">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <text id="620">
                            <property name="textAlign">left</property>
                            <property name="contentType">auto</property>
                            <text-property name="content"><![CDATA[Interessado:]]></text-property>
                        </text>
                    </cell>
                    <cell id="598">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <data id="649">
                            <property name="textAlign">right</property>
                            <property name="resultSetColumn">nom_cgm</property>
                        </data>
                    </cell>
                </row>
                <row id="599">
                    <property name="height">2mm</property>
                    <cell id="600">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <text id="621">
                            <property name="paddingTop">1pt</property>
                            <property name="textAlign">left</property>
                            <property name="contentType">auto</property>
                            <text-property name="content"><![CDATA[Classificação:]]></text-property>
                        </text>
                    </cell>
                    <cell id="601">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <data id="650">
                            <property name="textAlign">right</property>
                            <property name="resultSetColumn">nom_classificacao</property>
                        </data>
                    </cell>
                </row>
                <row id="602">
                    <property name="height">2mm</property>
                    <cell id="603">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <text id="622">
                            <property name="textAlign">left</property>
                            <property name="contentType">auto</property>
                            <text-property name="content"><![CDATA[Assunto:]]></text-property>
                        </text>
                    </cell>
                    <cell id="604">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <data id="651">
                            <property name="textAlign">right</property>
                            <property name="resultSetColumn">nom_assunto</property>
                        </data>
                    </cell>
                </row>
                <row id="6667">
                    <property name="height">2mm</property>
                    <list-property name="visibility">
                        <structure>
                            <property name="format">all</property>
                            <expression name="valueExpr" type="javascript">if(params["centroCusto"]=='true'){
	false
}else{
	true
}</expression>
                        </structure>
                    </list-property>
                    <cell id="6668">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <text id="6670">
                            <property name="textAlign">left</property>
                            <property name="contentType">auto</property>
                            <text-property name="content"><![CDATA[Centro de Custo:]]></text-property>
                        </text>
                    </cell>
                    <cell id="6669">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <data id="6671">
                            <property name="textAlign">right</property>
                            <property name="resultSetColumn">centro_custo</property>
                        </data>
                    </cell>
                </row>
                <row id="605">
                    <property name="height">2mm</property>
                    <cell id="606">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <text id="623">
                            <property name="textAlign">left</property>
                            <property name="contentType">auto</property>
                            <text-property name="content"><![CDATA[Localização:]]></text-property>
                        </text>
                    </cell>
                    <cell id="607">
                        <property name="paddingTop">1pt</property>
                        <property name="textAlign">left</property>
                        <data id="652">
                            <property name="textAlign">right</property>
                            <property name="resultSetColumn">nom_setor</property>
                        </data>
                    </cell>
                </row>
            </detail>
        </table>
    </body>
</report>
